# Feature Parity Matrix

This matrix now documents how the Streamlit-era prototype maps to the current Spectra desktop application. Any mention of the
prototype is strictly legacy context so newcomers know those implementation notes no longer apply to the shipping UI.

| Prototype Capability | Desktop App Status | Evidence (Docs/Tests) | Future Direction |
| --- | --- | --- | --- |
| **Dataset sidebar & overlay toggles** | The desktop build exposes dedicated Datasets and Inspector docks for renaming traces, toggling their visibility, and keeping the floating legend in sync. Reference combos in the Inspector coordinate with the plot surface so overlays enable/disable without desynchronising. | User guide coverage in `docs/user/plot_tools.md` explains the docks and visibility toggles.【F:docs/user/plot_tools.md†L16-L36】 Smoke workflow test exercises the reference dataset combo and overlay checkbox wiring.【F:tests/test_smoke_workflow.py†L32-L86】 | Continue iterating on list density and legend clarity as larger spectral stacks arrive. |
| **Plot toolbar, gestures & LOD safeguards** | PyQtGraph-based plot pane ships with toolbar controls for cursor, reset, normalisation modes, and axis unit selectors. Built-in level-of-detail downsampling keeps dense traces interactive without touching source arrays. | Gestures, toolbar modes, and LOD behaviour are documented for operators.【F:docs/user/plot_tools.md†L1-L78】【F:docs/user/plot_tools.md†L96-L129】 Regression verifies that displayed intensities honour source units supplied by the importers.【F:tests/test_smoke_workflow.py†L88-L120】 | Planned refinements include automated screenshots of toolbar presets for the docs and expanded shortcut coverage. |
| **Reference overlays & annotation alignment** | Reference tab ships with selectable spectral libraries and IR functional-group overlays. Labels stack within their bands and recompute when the view range changes so annotations track zoom and unit changes. | Overlay behaviour and troubleshooting guidance appear in the plot tools guide.【F:docs/user/plot_tools.md†L80-L113】 UI regression tests assert payload integrity, label stacking, and reflow against view changes.【F:tests/test_reference_ui.py†L24-L137】【F:tests/test_smoke_workflow.py†L32-L86】 | Additional reference packs (e.g., Raman and UV-VIS) are planned once source data is curated. |
| **Importer safeguards for messy CSV/TXT files** | CsvImporter heuristics detect units from headers or prose, score numeric columns, reverse descending axes, and cache layouts per vendor format. Import metadata captures the rationale behind every decision for auditing. | Importer user guide details the heuristics and provenance metadata shape.【F:docs/user/importing.md†L1-L86】 Unit and column-selection behaviours are protected by dedicated regression tests.【F:tests/test_csv_importer.py†L1-L140】 | Broaden automated coverage to JCAMP and FITS edge cases and surface heuristic summaries directly in the import dialog. |
| **Provenance export & unit services** | The Provenance Service exports manifest bundles with canonical arrays while the Units Service keeps toolbar selections idempotent, preserving raw intensity units when switching views. | Smoke test walks through ingest, unit toggles, and manifest export, asserting provenance metadata and round-trips.【F:tests/test_smoke_workflow.py†L88-L155】 Export expectations are captured in the importing guide appendix.【F:docs/user/importing.md†L88-L135】 | Upcoming work includes wiring manifest metadata into the Knowledge Log once that subsystem lands. |
| **Knowledge Log integration** | Prototype “brains/atlas” notion is still being consolidated. The desktop app has documentation on how logs should be captured, but automated wiring from the UI has not shipped yet. | Logging policy lives in the Knowledge Log file while we plan integration hooks.【F:docs/history/KNOWLEDGE_LOG.md†L1-L78】 | Planned: surface a History tab fed by the Knowledge Log service once the automation is implemented. |
| **ML plugin system for functional-group classifiers** | Prototype relied on a remote ML endpoint. The desktop rewrite still hard-codes the shipped IR overlay; the extensible plugin manifest remains aspirational. | Architectural expectations are captured in the specs, but no production code currently implements pluggable ML models.【F:specs/architecture.md†L37-L52】 | Planned: design plugin manifests, local model sandboxing, and provenance tracking before enabling third-party ML packs. |

## Legacy Prototype Context

The Streamlit web interface is no longer under active development. It is referenced only to explain historical behaviours and why
the desktop rewrite diverged. Any Streamlit-specific notes should be treated as archival context rather than implementation
requirements for the supported application.
