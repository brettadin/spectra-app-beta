# Chapter 13 — Documentation and Learning Module

> **Purpose.** Design a rigorous, self‑contained documentation and learning system that teaches the spectroscopy workflow end to end, keeps all agents on the same page, and doubles as the application’s canonical reference.
>
> **Scope.** Concept explanations, SOP walkthroughs, math sidebars, API docs, quizzes, labs, and report templates spanning Chapters 1–12 (modalities, units, calibration, fusion, identification, provenance, formats). Materials target advanced undergraduate to early graduate level.
>
> **Path notice.** File and folder names are **placeholders**. The app **must** resolve tokens like `[SESSION_ID]`, `[DATASET_ID]`, `[MODALITY]`, `[YYYYMMDD]`, `[INSTRUMENT_ID]` at runtime. Do **not** hardcode.

---

## 0. Design principles
1. **Single source of truth.** The same markdown/JSON drives in‑app help, printable PDFs, and web docs. No forked content.
2. **Executable pedagogy.** Every math rule or API call is backed by a runnable example or a validated unit test.
3. **Explain → Practice → Assess.** Each topic has a concept card, a hands‑on task with real data, and an auto‑graded checkpoint.
4. **Deterministic builds.** Docs are versioned and reproducible; exact library versions and constants are stamped in the footer.
5. **Accessibility.** Alt‑text for figures, keyboard navigation, colorblind‑safe palettes, captioned videos.

---

## 1. Content architecture

### 1.1 Top‑level structure
- **Guides** (why/how): conceptual walk‑throughs that mirror Chapters 1–12.
- **Reference** (what): APIs, schemas, CLI flags, configuration files.
- **Tutorials/Labs** (do): step‑by‑step labs using campus or archival data.
- **Assessments**: quizzes, graded notebooks, rubric‑driven report tasks.
- **Glossary & Formula sheet**: symbols, units, conversions.
- **Changelog**: per release, with migration notes.

### 1.2 Navigation map (chapters → lessons)
| Chapter | Lesson titles (indicative) |
|---|---|
| 1 | Modalities overview; What each instrument reveals; When to use which |
| 2 | Clean acquisition SOPs; QC gates; Checklists |
| 3 | Cross‑modal fusion; Evidence graphs; Conflict reports |
| 4 | Source registry; Adapters; Licensing & trust tiers |
| 5 | Units and axes; Air↔vacuum; Raman shift math |
| 6 | Calibration pipeline; LSF; Response functions; Velocity frames |
| 7 | Identification engine; Priors; Scoring; Alternatives |
| 8 | Provenance & manifests; Hashing; Repro builds |
| 9 | App feature tour; Spectral viewer; Report builder |
| 10 | Campus workflows; Mystery‑sample practicum |
| 11 | Scoring rubric; Confidence tiers; Tuning protocol |
| 12 | File formats; HDF5/Parquet/JFITS/JCAMP; Sidecars |

---

## 2. Content types and templates

### 2.1 Concept card (markdown)
```
---
title: "Beer–Lambert law"
id: concept-beer-lambert
related: ["units-axes", "uvvis-quant"]
level: advanced-undergrad
dependencies: ["concept-absorbance", "concept-path-length"]
---
**Statement.** A = ε c ℓ.
**Assumptions.** Monochromatic beam, homogeneous solution, negligible stray light.
**Derivation.** Short, with link to full math sidebar.
**Common pitfalls.** Stray light; inner-filter effects; cuvette mismatch.
**References.** [ACS style citations with DOI]
```

### 2.2 Lab walkthrough (markdown + checklists)
```
---
title: "Raman with 785 nm — Si check and sample run"
id: lab-raman-785
requires: [instrument:RAMAN-01]
artifacts_out: ["sessions/[SESSION_ID]/raman/*", "manifest.json"]
---
1) Warm‑up and safety
2) Si 520.7 cm⁻¹ check → acceptance tolerance
3) Sample run → baseline model logged
4) Export bundle → run identification (Chapter 7)
```

### 2.3 Math sidebar (derivation)
- Includes equations for: Raman shift, air↔vacuum conversions (Ciddor/Edlén), Doppler/barycentric corrections, Voigt/FWHM relations, uncertainty propagation for additive/multiplicative steps. See Chapters 5–6 for canonical formulas.

### 2.4 Assessment item (JSON)
```json
{
  "id": "quiz-units-001",
  "type": "numeric",
  "prompt": "Convert 532.000 nm to cm^-1.",
  "answer": 18797.3,
  "tolerance": 0.1,
  "explain": "Use 10^7 / λ[nm]."
}
```

### 2.5 Report template (markdown → PDF)
```
# Identification Report — [SAMPLE_ID]
## Summary
Top candidate, confidence tier, Δ to runner‑up.
## Evidence
Per‑modality overlays at matched FWHM; feature table with uncertainties.
## Provenance
Libraries with versions; calibration artifacts; transforms ledger.
```

### 2.6 API reference block
- Autogenerated from docstrings with examples that match our schemas from Chapters 3–7, including type hints and error codes.

---

## 3. Style guide (ACS citations, notation, units)
- **Citation style:** ACS (author, title, journal, year, volume, pages, DOI). Each page lists sources with access dates.
- **Symbols:** λ (nm), \(\tilde{\nu}\) (cm⁻¹), Δ\(\tilde{\nu}\) (cm⁻¹), E (eV). Follow Chapter 5 notation rigorously.
- **Units:** explicit in text and plots; never implied. UI screenshots show unit badges.
- **Figures:** vector SVG preferred; include alt‑text and data source.

---

## 4. Build and versioning
- **Docs version** equals app **SEMVER** plus git commit hash: `v[MAJOR.MINOR.PATCH]+[shortSHA]`.
- **Rebuild determinism:** lockfile for Python packages; node modules pinned if web front‑end is used.
- **Continuous checks:** link checker, math validator (unit tests for conversions), schema linter for JSON examples, spelling/style lints.
- **Release bundle:** `docs/releases/[SEMVER]/docs_[YYYYMMDD].zip` with checksums.

---

## 5. Education flow (30/60/90 minutes)
- **30 min:** Unit/axis crash course (Ch. 5), Raman shift calculator demo, quick quiz (3 numeric items).
- **60 min:** Clean acquisition lab (Ch. 2) + Si/polystyrene checks + short identification run (Ch. 7).
- **90 min:** Cross‑modal fusion case (Ch. 3) + rubric application (Ch. 11) + report export with provenance (Ch. 8).

---

## 6. Integration inside the app
- **Context panels:** each major UI section links to the exact lesson (e.g., Spectral Viewer → Units & Axes; Calibration Manager → LSF & Response).
- **“Explain math” toggles:** inline derivations and a live calculator for unit conversions and Raman shift with uncertainty propagation.
- **Interactive checklists:** pre‑run, during‑run, post‑run (from Chapter 2) with pass/fail states saved to the manifest.
- **Teaching mode:** locks risky transforms, shows rationale popovers, collects checkpoints for grading.

---

## 7. Assessments and grading
- **Auto‑graded quizzes:** numeric, multiple‑select, short derivation entries checked by symbolic engine where reasonable.
- **Lab checkpoints:** QC gates (SNR, wavelength RMS, LSF) verified from session manifests.
- **Mystery sample rubric:** uses Chapter 11 weights/tiers; generates a grade with explanations and links to missed concepts.

---

## 8. Authoring workflow
1. Write lesson in markdown using our front‑matter template.
2. Add examples and datasets; reference placeholders for paths.
3. Run `docs:validate` to check links, schemas, math, and accessibility.
4. Submit PR for review by domain lead and pedagogy lead.
5. On merge, CI builds the docs bundle and updates in‑app help.

**Folder template** (placeholders):
```
docs/
  lessons/
    ch05-units-axes.md
    ch06-calibration-lsf.md
    ch07-identification.md
  labs/
    lab-ftir-atr-basics.md
    lab-raman-785.md
  quizzes/
    quiz-units-001.json
  reference/
    api/
    schemas/
  assets/
    figures/
```

---

## 9. Accessibility & inclusivity
- Provide text alternatives for all figures; avoid color‑only encodings; maintain 4.5:1 contrast minimum.
- Use simple language first, then technical detail; progressive disclosure in sidebars.
- Offer captions and transcripts for videos; keyboard‑first navigation.

---

## 10. Example cross‑links
- From **Units & Axes** lesson → Chapter 5 canonical formulas; links to calculator.
- From **Calibration** lesson → Chapter 6 method stubs and QC plots.
- From **Fusion** lesson → Chapter 3 evidence graph schema; a small CO₂/CO example.
- From **Rubric** lesson → Chapter 11 thresholds with a live score table.
- From **File formats** lesson → Chapter 12 HDF5 layout with real bundle screenshot.

---

## 11. Future upgrades
- Jupyter‑style **executable lessons** with local kernels and sandboxed data.
- Multi‑language support; localized units and decimal separators.
- Adaptive learning: recommend lessons based on quiz performance and lab errors.
- “Docstring tests” that run API examples during CI to prevent doc drift.

---

## 12. References (anchor list; full cites in Ch. 32)
- ACS Style Guide for citations and references.
- IUPAC Gold Book (photometric terms; Beer–Lambert law entries).
- Core spectroscopy texts: Skoog/Holler/Crouch; Hollas; Lakowicz.
- Standards/specs: HDF5, Apache Parquet, FITS/WCS, JCAMP‑DX, JSON Schema.

> **Note.** Replace all placeholder tokens during export; record exact access dates, versions, and DOIs in Chapter 32 (Sources).

